<div>
    <div class="chex-button-row">
        <button data-bind="text: localize('CHEX.HEXEDIT.Improvements'), click: toggleTab('improvements'), css: { 'active': activeTab === 'improvements'}"></button>
        <button data-bind="text: localize('CHEX.HEXEDIT.Features'), click: toggleTab('features'), css: { 'active': activeTab === 'features'}"></button>
        <button data-bind="text: localize('CHEX.HEXEDIT.Realms'), click: toggleTab('realms'), css: { 'active': activeTab === 'realms'}"></button>
        <button data-bind="text: localize('CHEX.HEXEDIT.Resources'), click: toggleTab('resources'), css: { 'active': activeTab === 'resources'}"></button>
        <button data-bind="text: localize('CHEX.HEXEDIT.Terrains'), click: toggleTab('terrains'), css: { 'active': activeTab === 'terrains'}"></button>
        <button data-bind="text: localize('CHEX.HEXEDIT.Travels'), click: toggleTab('travels'), css: { 'active': activeTab === 'travels'}"></button>
    </div>

    <div style="height: calc(100% - 4rem); width: 100%;">
        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'improvements'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Improvements')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'improvement')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'improvementTemplate', foreach: improvements }">

            </div>
        </fieldset>

        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'features'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Features')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'features')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'featureTemplate', foreach: features }">

            </div>
        </fieldset>

        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'realms'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Realms')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'realms')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'realmTemplate', foreach: realms }">

            </div>
        </fieldset>

        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'resources'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Resources')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'resources')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'resourceTemplate', foreach: resources }">

            </div>
        </fieldset>

        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'terrains'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Terrains')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'terrains')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'terrainTemplate', foreach: terrains }">

            </div>
        </fieldset>

        <fieldset data-bind="visible: activeTab() === '' || activeTab() === 'travels'">
            <legend>
                <span data-bind="text: localize('CHEX.HEXEDIT.Travels')"></span>
                <button type="button" data-bind="click: addObject.bind($root, 'travels')" class="chex-add-button">
                    <span data-bind="text: localize('CHEX.HEXEDIT.Add')"></span>
                </button>
            </legend>
            <div data-bind="template: { name: 'travelTemplate', foreach: travels }">

            </div>
        </fieldset>
    </div>

    <footer>
        <button data-bind="click: save">
            <i class="fa-solid fa-save"></i>
            <span data-bind="text: localize('CHEX.HEXEDIT.Save')"></span>
        </button>
    </footer>
</div>

<!-- Templates -->
<script type="text/html" id="featureTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.features, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Image'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Image') }" class="chex-key"></span>
                <input class="chex-icon-path" type="text" data-bind="value: img">
                <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.PickIconTT') }, click: $root.pickIcon.bind($root, $data)" class="fa-solid fa-image chex-open-filepicker"></button>
            </p>
        </div>
        <img class="chex-img-preview" data-bind="attr: { src: img, alt: 'Image Preview' }">
    </div>
</script>

<script type="text/html" id="improvementTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.improvements, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Image'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Image') }" class="chex-key"></span>
                <input class="chex-icon-path" type="text" data-bind="value: img">
                <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.PickIconTT') }, click: $root.pickIcon.bind($root, $data)" class="fa-solid fa-image chex-open-filepicker"></button>
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Formula'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.FormulaTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: special">
            </p>
        </div>
        <img class="chex-img-preview" data-bind="attr: { src: img, alt: 'Image Preview' }">
    </div>
</script>

<script type="text/html" id="realmTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.realms, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Color'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Color') }" class="chex-key"></span>
                <input type="color" data-bind="value: color">
            </p>
        </div>
    </div>
</script>

<script type="text/html" id="resourceTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.resources, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Image'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Image') }" class="chex-key"></span>
                <input class="chex-icon-path" type="text" data-bind="value: img">
                <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.PickIconTT') }, click: $root.pickIcon.bind($root, $data)" class="fa-solid fa-image chex-open-filepicker"></button>
            </p>
        </div>
        <img class="chex-img-preview" data-bind="attr: { src: img, alt: 'Image Preview' }">
    </div>
</script>

<script type="text/html" id="terrainTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.terrains, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Image'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Image') }" class="chex-key"></span>
                <input class="chex-icon-path" type="text" data-bind="value: img">
                <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.PickIconTT') }, click: $root.pickIcon.bind($root, $data)" class="fa-solid fa-image chex-open-filepicker"></button>
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.ToolIcon'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.ToolIconTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: toolIcon">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Travel'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.TravelTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: travel">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Color'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Color') }" class="chex-key"></span>
                <input type="color" data-bind="value: color">
            </p>
        </div>
        <img class="chex-img-preview" data-bind="attr: { src: img, alt: 'Image Preview' }">
    </div>
</script>

<script type="text/html" id="travelTemplate">
    <div class="chex-grid-container">
        <button data-bind="attr: { 'data-tooltip': $root.localize('CHEX.HEXEDIT.Delete') }, click: $root.deleteObject.bind($root, $root.travels, $data)" type="button" class="fa-solid fa-times chex-delete"></button>
        <div class="chex-item-container">
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Id'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.IdTT') }" class="chex-key"></span>
                <input type="text" data-bind="value: id">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Label'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Label') }" class="chex-key"></span>
                <input type="text" data-bind="value: label">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Multiplier'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.MultiplierTT') }" class="chex-key"></span>
                <input type="number" data-bind="value: multiplier">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Color'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.Color') }" class="chex-key"></span>
                <input type="color" data-bind="value: color">
            </p>
            <p class="chex-item">
                <span data-bind="text: $root.localize('CHEX.CUSTOMIZER.Special'), attr: { 'data-tooltip': $root.localize('CHEX.CUSTOMIZER.SpecialTT') }" class="chex-key"></span>
                <input type="checkbox" data-bind="checked: special">
            </p>
        </div>
    </div>
</script>